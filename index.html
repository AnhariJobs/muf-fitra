<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cari Data Mobil</title>
    <!-- Bootstrap 5.3.1 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f9f9f9;
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 1000px;
            margin: 50px auto;
        }

        h1 {
            font-family: 'Roboto', sans-serif;
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }

        .form-inline {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 20px;
        }

        .form-control {
            border-radius: 30px;
            padding: 15px 20px;
            border: 1px solid #ddd;
        }

        .result-item {
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            transition: transform 0.3s ease;
        }

        .result-item:hover {
            transform: scale(1.05);
        }

        .highlight {
            background-color: #ffeb3b;
        }

        .btn-custom {
            background-color: #ff6f61;
            color: #fff;
            border-radius: 30px;
            padding: 10px 20px;
            border: none;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s ease;
        }

        .btn-custom:hover {
            background-color: #ff4b39;
        }

        .modal-content {
            border-radius: 15px;
            padding: 30px;
            background-color: #f4f7f6;
        }

        .modal-header {
            border-bottom: 2px solid #ddd;
        }

        .modal-title {
            color: #333;
        }

        .modal-body p {
            margin: 10px 0;
        }

        .close {
            font-size: 30px;
            color: #ff6f61;
        }

        .close:hover {
            color: #ff4b39;
        }

        .result-item i {
            color: #ff6f61;
            margin-right: 10px;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>Cari Data Mobil</h1>
        <div class="form-inline mb-4">
            <input type="text" id="searchBox" class="form-control" placeholder="Masukkan kata kunci...">
        </div>

        <div class="result" id="result"></div>
    </div>

    <!-- Modal untuk Detail -->
    <div class="modal" id="detailModal" tabindex="-1" aria-labelledby="detailModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="detailModalLabel">Detail Mobil</h5>
                    <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">&times;</button>
                </div>
                <div class="modal-body">
                    <div id="detailContent"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS and Popper.js -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.min.js"></script>

    <script>
        let data = [];

        async function loadData() {
            const response = await fetch('data.json');
            data = await response.json();
        }

        document.getElementById('searchBox').addEventListener('input', function () {
            const query = this.value.toLowerCase();
            const filteredData = data.filter(item => {
                return Object.values(item).some(value => value.toString().toLowerCase().includes(query));
            });
            renderResults(filteredData);
        });

        function renderResults(filteredData) {
            const resultContainer = document.getElementById('result');
            resultContainer.innerHTML = '';

            if (filteredData.length === 0) {
                resultContainer.innerHTML = '<p class="text-center">No results found</p>';
                return;
            }

            filteredData.forEach(item => {
                const resultItem = document.createElement('div');
                resultItem.classList.add('result-item');

                // Highlighting search terms
                let highlightedText = item["MODEL DESC SYSTEM"];
                highlightedText = highlightedText.replace(/(Brio|AT|9FO|MT)/gi, '<span class="highlight">$1</span>');

                resultItem.innerHTML = `
                    <i class="fas fa-car"></i>
                    <strong>MODEL DESC SYSTEM:</strong> ${highlightedText} <br>
                    <strong>MODEL:</strong> ${item["MODEL"] || '-'} <br>
                    <strong>CC:</strong> ${item["CC"] || '-'} <br>
                    <strong>Jenis:</strong> ${item["Jenis"] || '-'} <br>
                    <strong>BBM:</strong> ${item["BBM"] || '-'} <br>
                    <strong>Transmisi:</strong> ${item["Transmisi"] || '-'} <br>
                    <strong>CODE:</strong> ${item["CODE"] || '-'} <br>
                    <button class="btn-custom" onclick="showDetails('${item["MODEL DESC SYSTEM"]}')">Lihat Detail</button>
                `;

                resultContainer.appendChild(resultItem);
            });
        }

        function showDetails(modelDesc) {
            const item = data.find(item => item["MODEL DESC SYSTEM"] === modelDesc);
            const detailContent = document.getElementById('detailContent');
            let content = `
                <p><strong>MODEL DESC SYSTEM:</strong> ${item["MODEL DESC SYSTEM"]}</p>
                <p><strong>MODEL:</strong> ${item["MODEL"]}</p>
                <p><strong>CC:</strong> ${item["CC"]}</p>
                <p><strong>Jenis:</strong> ${item["Jenis"]}</p>
                <p><strong>BBM:</strong> ${item["BBM"]}</p>
                <p><strong>Transmisi:</strong> ${item["Transmisi"]}</p>
                <h5>Harga Berdasarkan Tahun:</h5>
                <ul>
                    ${Object.keys(item).map(key => {
                        if (key.match(/^\d{4}$/) && item[key]) {
                            return `<li>${key}: ${item[key]}</li>`;
                        }
                    }).join('')}
                </ul>
            `;
            detailContent.innerHTML = content;
            const modal = new bootstrap.Modal(document.getElementById('detailModal'));
            modal.show();
        }

        window.onload = loadData;
    </script>
</body>

</html>
