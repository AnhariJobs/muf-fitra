<!DOCTYPE html> 

<html lang="en">



<head>

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Cari Data Mobil</title>



    <!-- Bootstrap 5.3.1 -->

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">



    <!-- Font Awesome Icons -->

    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">



    <!-- Google Fonts -->

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">



    <style>

        body {

            font-family: 'Poppins', sans-serif;

            background-color: #f4f7f6;

            margin: 0;

            padding: 0;

        }



        .container {

            max-width: 1000px;

            margin: 50px auto;

        }



        h1 {

            font-family: 'Roboto', sans-serif;

            color: #333;

            text-align: center;

            margin-bottom: 30px;

            font-size: 2.5rem;

        }



        .form-inline {

            display: flex;

            gap: 10px;

            justify-content: center;

            margin-bottom: 20px;

            position: relative;

        }



        .form-control {

            border-radius: 30px;

            padding: 15px 20px;

            border: 1px solid #ddd;

            transition: all 0.3s ease;

        }



        .form-control:focus {

            border-color: #ff6f61;

            box-shadow: 0 0 10px rgba(255, 111, 97, 0.4);

        }



        .clear-icon {

            position: absolute;

            right: 15px;

            top: 50%;

            transform: translateY(-50%);

            font-size: 1.2rem;

            color: #888;

            cursor: pointer;

            display: none;

        }



        .clear-icon.show {

            display: block;

        }



        .result-item {

            background-color: #fff;

            border: 1px solid #ddd;

            border-radius: 15px;

            padding: 15px;

            margin-bottom: 20px;

            transition: transform 0.3s ease, box-shadow 0.3s ease;

            cursor: pointer;

        }



        .result-item:hover {

            transform: scale(1.05);

            box-shadow: 0px 5px 15px rgba(0, 0, 0, 0.1);

        }



        .highlight {

            background-color: #ffeb3b;

        }



        footer {

            background-color: #333;

            color: #fff;

            padding: 20px;

            text-align: center;

            position: fixed;

            width: 100%;

            bottom: 0;

        }



        footer a {

            color: #ff6f61;

            text-decoration: none;

            margin: 0 10px;

        }



        footer a:hover {

            color: #ff4b39;

        }



        .modal-content {

            font-family: 'Poppins', sans-serif;

        }

    </style>

</head>



<body>



    <div class="container">

        <h1>Cari Data Mobil</h1>



        <div class="form-inline mb-4">

            <input type="text" id="searchBox" class="form-control" placeholder="Masukkan kata kunci...">

            <i class="fas fa-times clear-icon" id="clearSearch"></i>

        </div>



        <div class="result" id="result"></div>

    </div>



    <!-- Modal Detail -->

    <div class="modal fade" id="detailModal" tabindex="-1" aria-labelledby="detailModalLabel" aria-hidden="true">

        <div class="modal-dialog">

            <div class="modal-content">

                <div class="modal-header">

                    <h5 class="modal-title" id="detailModalLabel">Detail Mobil</h5>

                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>

                </div>

                <div class="modal-body" id="modalBody">

                    <!-- Detail data will be inserted here -->

                </div>

            </div>

        </div>

    </div>



    <!-- Bootstrap JS and Popper.js -->

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.min.js"></script>



    <script>

        let data = [];



        // Memuat data JSON

        async function loadData() {

            const response = await fetch('data.json');

            data = await response.json();

        }



        // Pencarian fleksibel

        document.getElementById('searchBox').addEventListener('input', function () {

            const query = this.value.toLowerCase().trim();

            const clearIcon = document.getElementById('clearSearch');



            // Menampilkan ikon X hanya jika inputan tidak kosong

            if (query !== "") {

                clearIcon.classList.add('show');

            } else {

                clearIcon.classList.remove('show');

            }



            const filteredData = data.filter(item => {

                // Memecah query menjadi beberapa kata kunci dan memungkinkan pencocokan fleksibel

                const keywords = query.split(' ').filter(Boolean);



                return keywords.every(keyword => {

                    // Memeriksa setiap nilai dalam item (termasuk key dan value) apakah mengandung keyword

                    return Object.values(item).some(value => {

                        return value.toString().toLowerCase().includes(keyword);

                    });

                });

            });



            renderResults(filteredData, query);

        });



        // Fungsi untuk merender hasil pencarian

        function renderResults(filteredData, query) {

            const resultContainer = document.getElementById('result');

            resultContainer.innerHTML = '';



            // Batasi hasil maksimal 8 data

            filteredData = filteredData.slice(0, 8);



            if (filteredData.length === 0) {

                resultContainer.innerHTML = '<p class="text-center">No results found</p>';

                return;

            }



            filteredData.forEach(item => {

                const resultItem = document.createElement('div');

                resultItem.classList.add('result-item');



                let highlightedText = item["MODEL DESC SYSTEM"];

                // Menyoroti bagian dari hasil yang cocok dengan pencarian

                highlightedText = highlightedText.replace(new RegExp('(' + query.split(' ').join('|') + ')', 'gi'), '<span class="highlight">$1</span>');



                resultItem.innerHTML = `

                    <i class="fas fa-car"></i>

                    <strong>MODEL DESC SYSTEM:</strong> ${highlightedText} <br>

                    <strong>MODEL:</strong> ${item["MODEL"] || '-'} <br>

                    <strong>CC:</strong> ${item["CC"] || '-'} <br>

                    <strong>Jenis:</strong> ${item["Jenis"] || '-'} <br>

                    <strong>BBM:</strong> ${item["BBM"] || '-'} <br>

                    <strong>Transmisi:</strong> ${item["Transmisi"] || '-'} <br>

                    <strong>CODE:</strong> ${item["CODE"] || '-'} <br>

                    <div class="click-indicator"><i class="fas fa-info-circle"></i> Klik untuk detail</div>

                `;



                // Menambahkan event listener untuk menampilkan modal detail

                resultItem.addEventListener('click', () => {

                    showDetailModal(item, query);

                });



                resultContainer.appendChild(resultItem);

            });

        }



        // Fungsi untuk menampilkan modal dengan detail data

        function showDetailModal(item, query) {

            const modalBody = document.getElementById('modalBody');

            let modalContent = `

                <strong>MODEL DESC SYSTEM:</strong> ${item["MODEL DESC SYSTEM"]} <br>

                <strong>MODEL:</strong> ${item["MODEL"] || '-'} <br>

                <strong>CC:</strong> ${item["CC"] || '-'} <br>

                <strong>Jenis:</strong> ${item["Jenis"] || '-'} <br>

                <strong>BBM:</strong> ${item["BBM"] || '-'} <br>

                <strong>Transmisi:</strong> ${item["Transmisi"] || '-'} <br>

                <strong>CODE:</strong> ${item["CODE"] || '-'} <br>

                <hr>

                <h5>Harga Berdasarkan Tahun:</h5>

            `;



            // Menampilkan harga berdasarkan tahun yang relevan dengan kata kunci pencarian

            Object.keys(item).forEach(key => {

                if (key.match(/^\d{4}$/)) {

                    const price = item[key];

                    if (price) {

                        modalContent += `<strong>${key}:</strong> ${new Intl.NumberFormat().format(price)}<br>`;

                    }

                }

            });



            modalBody.innerHTML = modalContent;

            const modal = new bootstrap.Modal(document.getElementById('detailModal'));

            modal.show();

        }



        // Fungsi untuk menghapus inputan pencarian

        document.getElementById('clearSearch').addEventListener('click', () => {

            document.getElementById('searchBox').value = '';

            document.getElementById('clearSearch').classList.remove('show');

            renderResults([], '');

        });



        window.onload = loadData;

    </script>



    <!-- Footer -->

    <footer>

        <p>&copy; 2024 Created and Designed by <br><a href="https://wa.me/6282288246821" target="_blank">Fahmi Anhari.</a></p>

        <div>

            <a href="#" target="_blank"><i class="fab fa-facebook"></i></a>

            <a href="#" target="_blank"><i class="fab fa-twitter"></i></a>

            <a href="#" target="_blank"><i class="fab fa-instagram"></i></a>

        </div>

    </footer>



</body>



</html>
