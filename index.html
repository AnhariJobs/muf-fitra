<!DOCTYPE html> 
<html lang="en">

<head>

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Cari Data Mobil</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css">

    <style>

        body { font-family: Arial, sans-serif; margin: 20px; background-color: #f9f9f9; }

        .container { max-width: 900px; margin: auto; }

        .form-inline { display: flex; gap: 10px; flex-wrap: wrap; }

        .result { margin-top: 20px; }

        .result-item { margin-bottom: 15px; padding: 10px; border: 1px solid #ddd; border-radius: 5px; }

        .highlight { background-color: yellow; }

    </style>

</head>

<body>

    <div class="container">

        <h1 class="text-center my-4">Cari Data Mobil</h1>



        <!-- Input Pencarian -->

        <div class="form-inline mb-3">

            <input type="text" id="searchBox" class="form-control flex-grow-1" placeholder="Masukkan kata kunci...">

        </div>



        <!-- Hasil Pencarian -->

        <div class="result" id="result"></div>

    </div>



    <script>

        let data = [];
        let filteredData = [];

        let lastMerk = ''; // Menyimpan Merk terakhir yang ada
        let lastGrupModel = ''; // Menyimpan Grup Model terakhir yang ada
        let lastModel = ''; // Menyimpan Model terakhir yang ada



        // Memuat data JSON

        async function loadData() {

            const response = await fetch('data.json');

            data = await response.json();

            filteredData = [...data];

            renderResults(); // Render hasil setelah data dimuat

        }



        // Pencarian Otomatis

        document.getElementById('searchBox').addEventListener('input', search);



        function search() {

            const query = document.getElementById('searchBox').value.toLowerCase();



            // Menyaring data berdasarkan pencarian

            filteredData = data.filter(item => {

                return Object.values(item).some(value =>

                    value.toString().toLowerCase().includes(query)

                );

            });



            renderResults();

        }



        // Menampilkan hasil pencarian

        function renderResults() {

            const resultContainer = document.getElementById('result');

            resultContainer.innerHTML = ''; // Clear previous results



            if (filteredData.length === 0) {

                resultContainer.innerHTML = '<p>No results found</p>';

                return;

            }



            filteredData.forEach(item => {

                const resultItem = document.createElement('div');

                resultItem.classList.add('result-item');

                // Mengisi kolom kosong dengan data sebelumnya
                const merk = item["MERK"] || lastMerk;
                const grupModel = item["GRUP MODEL"] || lastGrupModel;
                const model = item["MODEL"] || lastModel;

                // Update nilai terakhir
                if (item["MERK"]) lastMerk = item["MERK"];
                if (item["GRUP MODEL"]) lastGrupModel = item["GRUP MODEL"];
                if (item["MODEL"]) lastModel = item["MODEL"];

                // Menampilkan hasil pencarian untuk item ini
                resultItem.innerHTML = `
                    <strong>MERK:</strong> ${merk} <br>
                    <strong>GRUP MODEL:</strong> ${grupModel} <br>
                    <strong>MODEL:</strong> ${model} <br>
                    <strong>CC:</strong> ${item["CC"] || '-'} <br>
                    <strong>Jenis:</strong> ${item["Jenis"] || '-'} <br>
                    <strong>BBM:</strong> ${item["BBM"] || '-'} <br>
                    <strong>Transmisi:</strong> ${item["Transmisi"] || '-'} <br>
                    <strong>MODEL DESC SYSTEM:</strong> ${item["MODEL DESC SYSTEM"] || '-'} <br>
                    <strong>CODE ACQ:</strong> ${item["CODE"] || '-'} <br>
                `;

                resultContainer.appendChild(resultItem);

            });

        }



        // Memuat data saat halaman dibuka

        window.onload = loadData;

    </script>

</body>

</html>
